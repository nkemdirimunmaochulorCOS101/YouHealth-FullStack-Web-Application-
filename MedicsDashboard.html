<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouHealth Practitioner Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* General body styling for the full-screen background and font */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Active filter button styling for date filters */
        .filter-button.active {
            background-color: #1e3a8a; /* darkblue */
            color: white;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transform: scale(1.05);
        }

        /* Styling for the active navigation link */
        .nav-link.active {
            font-weight: 700;
            color: #1e3a8a; /* darkblue */
            border-bottom: 2px solid #1e3a8a;
            padding-bottom: 2px;
        }

        /* This class will hide the pages that are not active */
        .page-content {
            display: none;
        }

        /* This class will show the active page */
        .page-content.active {
            display: flex;
            flex-direction: column;
            flex-grow: 1;
        }

        /* Basic spinner for loading state */
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border-left-color: #3b82f6;
            animation: spin 1s ease infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }
    </style>
</head>
<body class="bg-blue-900 text-slate-800">

    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="flex items-center justify-between max-w-7xl mx-auto px-4 py-2 md:px-6">
            <div class="flex items-center space-x-2">
                <div class="flex items-center space-x-2">
                    <img src="istockphoto-1321617070-612x612-removebg-preview.png" alt="YouHealth Logo" class="h-10 w-10 rounded-xl">
                    <a href="YouHealthHomepage.html" class="text-xl md:text-2xl font-extrabold tracking-wide text-blue-900 cursor-pointer">YouHealth</a>
                </div>
            </div>
            <nav class="hidden md:flex flex-1 justify-center space-x-8">
                <a href="#dashboard-page" class="nav-link font-bold text-blue-900 hover:text-blue-900 transition duration-300 active">Dashboard</a>
                <a href="Medicspatientpage.html" class="nav-link font-medium text-gray-600 hover:text-blue-900 transition duration-300">Patients</a>
                <a href="MedicsSchedulepage.html" class="nav-link font-medium text-gray-600 hover:text-blue-900 transition duration-300">Schedule</a>
                <a href="MedicsMessagingpage.html" class="nav-link font-medium text-gray-600 hover:text-blue-900 transition duration-300">Messages</a>
                <a href="MedicsSettingspage.html" class="nav-link font-medium text-gray-600 hover:text-blue-900 transition duration-300">Settings</a>
            </nav>
            <div class="flex items-center space-x-4">
                <button id="sign-out-btn" class="hidden sm:block px-3 py-1 md:px-4 md:py-2 rounded-full text-white font-semibold bg-blue-900 hover:bg-blue-700 transition duration-300 transform hover:scale-105 text-sm">Sign Out</button>
                <button id="hamburger-btn" class="md:hidden text-gray-600 hover:text-blue-900 transition duration-300">
                    <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
                    </svg>
                </button>
            </div>
        </div>

        <div id="mobile-menu" class="hidden md:hidden absolute top-16 left-0 w-full bg-white shadow-lg z-40">
        <nav class="flex flex-col items-center py-4 space-y-4">
            <a href="#dashboard-page" class="nav-link text-lg font-bold text-blue-900 hover:text-blue-900 transition duration-300 active">Dashboard</a>
            <a href="Medicspatientpage.html" class="nav-link text-lg font-medium text-gray-600 hover:text-blue-900 transition duration-300">Patients</a>
            <a href="MedicsSchedulepage.html" class="nav-link text-lg font-medium text-gray-600 hover:text-blue-900 transition duration-300">Schedule</a>
            <a href="MedicsMessagingpage.html" class="nav-link text-lg font-medium text-gray-600 hover:text-blue-900 transition duration-300">Messages</a>
            <a href="MedicsSettingspage.html" class="nav-link text-lg font-medium text-gray-600 hover:text-blue-900 transition duration-300">Settings</a>
        </nav>
    </div>

    </header>

    
    <div class="flex-1 p-4 md:p-8 overflow-y-auto">

        <main id="dashboard-page" class="page-content active max-w-7xl mx-auto">
            <h2 class="text-3xl md:text-4xl font-bold text-white mb-6">Hello, Dr. Doe!</h2>

            <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
                <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-4 sm:space-y-0">
                    <h3 class="text-xl font-semibold text-gray-900">Today's Schedule</h3>
                    <div id="date-filters" class="flex space-x-2 sm:space-x-4">
                        <button class="filter-button bg-gray-200 text-gray-700 px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-300 active" data-filter="day">Day</button>
                        <button class="filter-button bg-gray-200 text-gray-700 px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-300" data-filter="week">Week</button>
                        <button class="filter-button bg-gray-200 text-gray-700 px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-300" data-filter="month">Month</button>
                        <button class="filter-button bg-gray-200 text-gray-700 px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-300" data-filter="year">Year</button>
                    </div>
                </div>

                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                    <div class="p-4 rounded-xl cursor-pointer hover:bg-blue-200 transition-colors duration-300 total-filter-button bg-blue-100" data-filter="all">
                        <p class="text-sm font-medium text-blue-800">Total Patients</p>
                        <p id="total-appointments-count" class="text-2xl font-bold text-blue-900">--</p>
                    </div>
                    <div class="p-4 rounded-xl cursor-pointer hover:bg-green-200 transition-colors duration-300 total-filter-button bg-green-100" data-filter="Completed">
                        <p class="text-sm font-medium text-green-800">Completed</p>
                        <p id="completed-appointments-count" class="text-2xl font-bold text-green-900">--</p>
                    </div>
                    <div class="p-4 rounded-xl cursor-pointer hover:bg-yellow-200 transition-colors duration-300 total-filter-button bg-yellow-100" data-filter="Upcoming">
                        <p class="text-sm font-medium text-yellow-800">Upcoming</p>
                        <p id="upcoming-appointments-count" class="text-2xl font-bold text-yellow-900">--</p>
                    </div>
                    <div class="p-4 rounded-xl cursor-pointer hover:bg-red-200 transition-colors duration-300 total-filter-button bg-red-100" data-filter="Cancelled">
                        <p class="text-sm font-medium text-red-800">Cancelled</p>
                        <p id="cancelled-appointments-count" class="text-2xl font-bold text-red-900">--</p>
                    </div>
                </div>

                <div class="flex justify-end mb-4">
                    <button id="add-appointment-btn" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition duration-300 flex items-center space-x-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd" />
                        </svg>
                        <span>Add Appointment</span>
                    </button>
                </div>
                
                <div id="loading-spinner" class="flex justify-center items-center py-8">
                    <div class="spinner"></div>
                </div>

                <div id="appointments-list" class="space-y-4">
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-xl font-semibold text-gray-900 mb-4">Patient Quick-Search</h3>
                    <div class="flex items-center space-x-2">
                        <input type="text" placeholder="Enter patient ID or name..." class="flex-1 p-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <button class="bg-blue-900 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition duration-300">
                            Search
                        </button>
                    </div>
                </div>
                
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-xl font-semibold text-gray-900 mb-4">Pending Messages</h3>
                    <ul class="space-y-2">
                        <li class="p-3 bg-gray-50 rounded-lg flex items-center justify-between">
                            <span>Patient: Sarah Connor</span>
                            <span class="text-sm text-gray-500">Re: Prescription refill</span>
                        </li>
                        <li class="p-3 bg-gray-50 rounded-lg flex items-center justify-between">
                            <span>Patient: John T.</span>
                            <span class="text-sm text-gray-500">Lab results</span>
                        </li>
                    </ul>
                </div>
            </div>
        </main>
        
        <main id="patients-page" class="page-content max-w-7xl mx-auto">
            <div class="bg-white rounded-xl shadow-lg p-8 h-full">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-6">Patient Database</h2>
                <p class="text-gray-500">View and manage all patient records here. You can filter by name, condition, or last visit date.</p>
                <div class="mt-4">
                    <p class="text-gray-400">Content for the Patients page would be dynamically loaded here.</p>
                </div>
            </div>
        </main>

        <main id="schedule-page" class="page-content max-w-7xl mx-auto">
            <div class="bg-white rounded-xl shadow-lg p-8 h-full">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-6">Full Schedule</h2>
                <p class="text-gray-500">This section provides a complete calendar view of your appointments, allowing you to easily book, reschedule, or cancel them.</p>
                <div class="mt-4">
                    <p class="text-gray-400">Content for the Full Schedule page would be dynamically loaded here.</p>
                </div>
            </div>
        </main>
        
        <main id="messages-page" class="page-content max-w-7xl mx-auto">
            <div class="bg-white rounded-xl shadow-lg p-8 h-full">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-6">Secure Messages</h2>
                <p class="text-gray-500">Communicate securely with your patients and clinic staff.</p>
                <div class="mt-4">
                    <p class="text-gray-400">Content for the Messages page would be dynamically loaded here.</p>
                </div>
            </div>
        </main>

        <main id="settings-page" class="page-content max-w-7xl mx-auto">
            <div class="bg-white rounded-xl shadow-lg p-8 h-full">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-6">Account Settings </h2>
                <p class="text-gray-500">Manage your profile, communication preferences, and security settings here.</p>
                <div class="mt-4">
                    <p class="text-gray-400">Content for the Settings page would be dynamically loaded here.</p>
                </div>
            </div>
        </main>
    </div>
    
    <footer class="bg-white shadow-md mt-auto">
        <div class="flex flex-col md:flex-row items-center justify-between max-w-7xl mx-auto p-4 text-sm text-gray-600">
            <div>Â© 2025 YouHealth</div>
            <div class="mt-2 md:mt-0 flex space-x-4">
                <span>Made simple</span>
                <a href="#" class="hover:text-blue-900 transition duration-300">Privacy</a>
                <a href="#" class="hover:text-blue-900 transition duration-300">Contact</a>
            </div>
        </div>
    </footer>

    <script type="module">
    // Import Firebase functions from the CDN
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
    import { getAuth, signInWithCustomToken, signInAnonymously } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
    import { getFirestore, doc, getDoc, addDoc, setDoc, updateDoc, deleteDoc, onSnapshot, collection, query, where, getDocs } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

    // Firebase Initialization and Authentication
    const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
    const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
    const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

    let db;
    let auth;
    let userId;
    let allAppointments = [];
    let unsubscribe;

    const initializeFirebase = async () => {
        try {
            const app = initializeApp(firebaseConfig);
            auth = getAuth(app);
            db = getFirestore(app);

            if (initialAuthToken) {
                await signInWithCustomToken(auth, initialAuthToken);
            } else {
                await signInAnonymously(auth);
            }

            userId = auth.currentUser?.uid || crypto.randomUUID();
            console.log('Firebase initialized and user authenticated:', userId);
            
            // Start listening to appointments after authentication
            startAppointmentListener();
            
        } catch (error) {
            console.error("Error initializing Firebase or signing in:", error);
        }
    };

    // Real-time listener for appointments
    const startAppointmentListener = () => {
        if (unsubscribe) {
            unsubscribe(); // Detach previous listener if it exists
        }
        
        const q = collection(db, `artifacts/${appId}/users/${userId}/appointments`);
        unsubscribe = onSnapshot(q, (querySnapshot) => {
            const appointments = [];
            querySnapshot.forEach((doc) => {
                appointments.push({ ...doc.data(), id: doc.id });
            });
            allAppointments = appointments;
            console.log("Appointments updated in real-time:", allAppointments);
            
            // Get the currently active date filter
            const activeDateFilter = document.querySelector('#date-filters .filter-button.active')?.dataset.filter;
            // Get the currently active status filter
            const activeStatusFilter = document.querySelector('.total-filter-button.ring-2')?.dataset.filter;

            // Prioritize the status filter if one is active, otherwise use the date filter
            renderAppointments(activeStatusFilter || activeDateFilter || 'day');
        }, (error) => {
            console.error("Error fetching appointments:", error);
        });
    };

    // Function to render appointments based on the filter
    function renderAppointments(filter) {
        const container = document.getElementById('appointments-list');
        const loadingSpinner = document.getElementById('loading-spinner');
        if (!container || !loadingSpinner) return; // Exit if the container element is not on the current page

        // Show loading spinner while rendering
        loadingSpinner.style.display = 'flex';
        container.innerHTML = ''; // Clear existing list

        const dayNames = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
        let filteredAppointments = [];
        const today = new Date();

        // A helper function to format the appointment item HTML
        const createAppointmentItem = (app) => {
            const statusColor = app.status === 'Completed' ? 'bg-green-100 text-green-800' : app.status === 'Upcoming' ? 'bg-yellow-100 text-yellow-800' : 'bg-red-100 text-red-800';
            return `
                <div class="bg-gray-50 rounded-xl p-4 flex flex-col sm:flex-row items-start sm:items-center justify-between border border-gray-200">
                    <div>
                        <h4 class="text-lg font-semibold text-gray-900">${app.patientName}</h4>
                        <p class="text-gray-600 text-sm">Reason: ${app.reason}</p>
                        <p class="text-gray-500 text-sm">Date: ${app.date} at ${app.time}</p>
                    </div>
                    <span class="mt-2 sm:mt-0 px-3 py-1 text-sm font-semibold rounded-full ${statusColor}">
                        ${app.status}
                    </span>
                </div>
            `;
        };

        // Switch case to handle both date and status filters
        switch (filter) {
            case 'day':
                const todayString = today.toISOString().split('T')[0];
                filteredAppointments = allAppointments.filter(app => app.date === todayString);
                break;
            case 'week':
                const startOfWeek = new Date(today.getFullYear(), today.getMonth(), today.getDate() - today.getDay());
                const endOfWeek = new Date(today.getFullYear(), today.getMonth(), today.getDate() + (6 - today.getDay()));
                endOfWeek.setHours(23, 59, 59, 999); // Set to end of day
                filteredAppointments = allAppointments.filter(app => {
                    const appDate = new Date(app.date);
                    return appDate >= startOfWeek && appDate <= endOfWeek;
                });
                break;
            case 'month':
                const startOfMonth = new Date(today.getFullYear(), today.getMonth(), 1);
                const endOfMonth = new Date(today.getFullYear(), today.getMonth() + 1, 0);
                endOfMonth.setHours(23, 59, 59, 999); // Set to end of day
                filteredAppointments = allAppointments.filter(app => {
                    const appDate = new Date(app.date);
                    return appDate >= startOfMonth && appDate <= endOfMonth;
                });
                break;
            case 'year':
                const startOfYear = new Date(today.getFullYear(), 0, 1);
                const endOfYear = new Date(today.getFullYear(), 11, 31);
                endOfYear.setHours(23, 59, 59, 999); // Set to end of day
                filteredAppointments = allAppointments.filter(app => {
                    const appDate = new Date(app.date);
                    return appDate >= startOfYear && appDate <= endOfYear;
                });
                break;
            case 'Completed':
            case 'Upcoming':
            case 'Cancelled':
                filteredAppointments = allAppointments.filter(app => app.status === filter);
                break;
            case 'all':
            default:
                filteredAppointments = allAppointments;
        }

        // Update the count for the summary cards
        document.getElementById('total-appointments-count').textContent = allAppointments.length;
        document.getElementById('completed-appointments-count').textContent = allAppointments.filter(app => app.status === 'Completed').length;
        document.getElementById('upcoming-appointments-count').textContent = allAppointments.filter(app => app.status === 'Upcoming').length;
        document.getElementById('cancelled-appointments-count').textContent = allAppointments.filter(app => app.status === 'Cancelled').length;
        
        // Sort appointments by date and time
        filteredAppointments.sort((a, b) => {
            const dateA = new Date(a.date);
            const dateB = new Date(b.date);
            if (dateA - dateB !== 0) {
                return dateA - dateB;
            }
            // If dates are the same, sort by time
            return a.time.localeCompare(b.time);
        });

        // Hide the spinner once rendering begins
        loadingSpinner.style.display = 'none';

        if (filteredAppointments.length === 0) {
            container.innerHTML = '<p class="text-center text-gray-500 py-8">No appointments found for this period.</p>';
        } else {
            // Group appointments by date for a better visual overview
            const groupedAppointments = filteredAppointments.reduce((acc, app) => {
                const date = app.date;
                if (!acc[date]) {
                    acc[date] = [];
                }
                acc[date].push(app);
                return acc;
            }, {});

            for (const date in groupedAppointments) {
                const dateObj = new Date(date + 'T00:00:00Z'); // Add 'T00:00:00Z' to ensure timezone-neutral parsing
                const dayHeader = `
                    <div class="mt-6 mb-2">
                        <h4 class="text-lg font-semibold text-gray-700">${dayNames[dateObj.getUTCDay()]}, ${dateObj.toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric', timeZone: 'UTC' })}</h4>
                    </div>
                `;
                container.innerHTML += dayHeader;

                groupedAppointments[date].forEach(app => {
                    container.innerHTML += createAppointmentItem(app);
                });
            }
        }
    }

    // Add sample appointment data to Firestore
    const addSampleAppointment = async () => {
        const appointment = {
            patientName: "New Patient " + Date.now().toString().slice(-4),
            reason: "New appointment",
            date: new Date().toISOString().split('T')[0],
            time: new Date().toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: true }),
            status: "Upcoming"
        };
        try {
            const docRef = await addDoc(collection(db, `artifacts/${appId}/users/${userId}/appointments`), appointment);
            console.log("Document written with ID: ", docRef.id);
        } catch (e) {
            console.error("Error adding document: ", e);
        }
    };

    // Event listeners for all filter buttons and navigation links
    document.addEventListener('DOMContentLoaded', () => {
        const dateFilterButtons = document.querySelectorAll('#date-filters .filter-button');
        const statusFilterButtons = document.querySelectorAll('.total-filter-button');
        const navLinks = document.querySelectorAll('.nav-link');
        const pages = document.querySelectorAll('.page-content');
        const addAppointmentBtn = document.getElementById('add-appointment-btn');
        const hamburgerBtn = document.getElementById('hamburger-btn');
        const mobileMenu = document.getElementById('mobile-menu');

        // Function to handle page navigation
        const navigateToPage = (targetId) => {
            // Hide all pages
            pages.forEach(page => page.classList.remove('active'));
            
            // Show the target page
            const targetPage = document.getElementById(targetId);
            if (targetPage) {
                targetPage.classList.add('active');
            }

            // Update active navigation link styling
            navLinks.forEach(link => {
                link.classList.remove('active', 'font-bold', 'text-blue-900');
                link.classList.add('font-medium', 'text-gray-600');
            });
            const activeLink = document.querySelector(`a[href="#${targetId}"]`);
            if (activeLink) {
                activeLink.classList.add('active', 'font-bold', 'text-blue-900');
                activeLink.classList.remove('font-medium', 'text-gray-600');
            }

            // Hide mobile menu after navigation
            mobileMenu.classList.add('hidden');
        };
        
        // Add click listeners for SPA navigation
        navLinks.forEach(link => {
            link.addEventListener('click', (event) => {
                if (link.getAttribute('href').startsWith('#')) {
                    event.preventDefault(); // Prevent default anchor behavior
                    const targetId = link.getAttribute('href').substring(1); // Get the ID without the '#'
                    navigateToPage(targetId);
                }
            });
        });

        // Toggle mobile menu visibility
        hamburgerBtn.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });

        // Handle the URL hash to display the correct page on load
        const initialHash = window.location.hash.substring(1) || 'dashboard-page';
        navigateToPage(initialHash);

        // Handle the click events for date filter buttons
        dateFilterButtons.forEach(button => {
            button.addEventListener('click', () => {
                dateFilterButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                
                // Reset status filter card styles
                statusFilterButtons.forEach(c => {
                    if (c.dataset.filter === 'all') c.classList.add('bg-blue-100');
                    if (c.dataset.filter === 'Completed') c.classList.add('bg-green-100');
                    if (c.dataset.filter === 'Upcoming') c.classList.add('bg-yellow-100');
                    if (c.dataset.filter === 'Cancelled') c.classList.add('bg-red-100');
                    c.classList.remove('bg-blue-300', 'bg-green-300', 'bg-yellow-300', 'bg-red-300', 'ring-2', 'ring-offset-2');
                });
                
                renderAppointments(button.dataset.filter);
            });
        });

        // Handle the click events for status filter cards
        statusFilterButtons.forEach(card => {
            card.addEventListener('click', () => {
                // Deselect date filter buttons
                dateFilterButtons.forEach(btn => btn.classList.remove('active'));

                // Apply active style to the clicked card and reset others
                statusFilterButtons.forEach(c => {
                    // Reset all card styles
                    c.classList.remove('ring-2', 'ring-offset-2', 'bg-blue-300', 'bg-green-300', 'bg-yellow-300', 'bg-red-300');
                    // Restore original colors
                    if (c.dataset.filter === 'all') c.classList.add('bg-blue-100');
                    if (c.dataset.filter === 'Completed') c.classList.add('bg-green-100');
                    if (c.dataset.filter === 'Upcoming') c.classList.add('bg-yellow-100');
                    if (c.dataset.filter === 'Cancelled') c.classList.add('bg-red-100');
                });

                // Apply active style to the clicked card
                const filter = card.dataset.filter;
                card.classList.add('ring-2', 'ring-offset-2');
                if (filter === 'all') {
                    card.classList.add('bg-blue-300', 'ring-blue-500');
                    card.classList.remove('bg-blue-100');
                } else if (filter === 'Completed') {
                    card.classList.add('bg-green-300', 'ring-green-500');
                    card.classList.remove('bg-green-100');
                } else if (filter === 'Upcoming') {
                    card.classList.add('bg-yellow-300', 'ring-yellow-500');
                    card.classList.remove('bg-yellow-100');
                } else if (filter === 'Cancelled') {
                    card.classList.add('bg-red-300', 'ring-red-500');
                    card.classList.remove('bg-red-100');
                }
                
                // Render appointments based on status filter
                renderAppointments(filter);
            });
        });

        // Add event listener for the "Add Appointment" button
        addAppointmentBtn.addEventListener('click', addSampleAppointment);
        
        // Initialize Firebase on page load
        initializeFirebase();
    });
</script>
</body>
</html>